<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1, maximum-scale=1.0, user-scalable=no, viewport-fit=cover, shrink-to-fit=no, minimal-ui">
    <title>FlexSearch - Smart Movie Search</title>
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --background-color: #fafbfc;
            --background-pattern: radial-gradient(circle at 25% 25%, #e3f2fd 0%, transparent 50%), 
                                 radial-gradient(circle at 75% 75%, #f3e5f5 0%, transparent 50%);
            --container-bg: #ffffff;
            --container-bg-glass: rgba(255, 255, 255, 0.85);
            --container-bg-transparent: rgba(255, 255, 255, 0);
            --text-color: #2c3e50;
            --text-secondary: #5a6c7d;
            --placeholder-color: #95a5a6;
            --border-color: #e1e8ed;
            --highlight-bg: linear-gradient(90deg, #e3f2fd 0%, #f3e5f5 100%);
            --highlight-text: #667eea;
            --shadow-light: 0 4px 20px rgba(102, 126, 234, 0.1);
            --shadow-medium: 0 8px 32px rgba(102, 126, 234, 0.15);
            --shadow-heavy: 0 12px 40px rgba(102, 126, 234, 0.2);
            --border-radius: 16px;
            --border-radius-small: 12px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        [data-theme="dark"] {
            --background-color: #0f1419;
            --background-pattern: radial-gradient(circle at 25% 25%, #1a237e 0%, transparent 50%), 
                                 radial-gradient(circle at 75% 75%, #4a148c 0%, transparent 50%);
            --container-bg: #1e2328;
            --container-bg-glass: rgba(30, 35, 40, 0.9);
            --text-color: #e1e8ed;
            --text-secondary: #8899a6;
            --placeholder-color: #657786;
            --border-color: #2f3336;
            --highlight-bg: linear-gradient(90deg, #1a237e 0%, #4a148c 100%);
            --shadow-light: 0 4px 20px rgba(0, 0, 0, 0.3);
            --shadow-medium: 0 8px 32px rgba(0, 0, 0, 0.4);
            --shadow-heavy: 0 12px 40px rgba(0, 0, 0, 0.5);
        }

        * {
            box-sizing: border-box;
        }

        body {
            padding: 0;
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Inter", Helvetica, Arial, sans-serif;
            font-size: 16px;
            background: var(--background-color);
            background-image: var(--background-pattern);
            background-attachment: fixed;
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 40px 20px;
            transition: var(--transition);
        }

        .main-container {
            width: 100%;
            max-width: 800px;
            position: relative;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInUp 0.8s ease-out;
        }

        .header h1 {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0 0 16px 0;
            letter-spacing: -0.02em;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin: 0;
            font-weight: 400;
        }

        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--container-bg-glass);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-small);
            padding: 12px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-light);
            transition: var(--transition);
            z-index: 1000;
        }

        .theme-toggle:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .search-container {
            width: 100%;
            animation: fadeInUp 0.8s ease-out 0.2s both;
        }

        .search-wrapper {
            position: relative;
            width: 100%;
            height: 56px;
            margin-bottom: 24px;
        }

        .search-icon {
            position: absolute;
            top: 50%;
            left: 20px;
            z-index: 2;
            transform: translateY(-50%);
            color: var(--placeholder-color);
            pointer-events: none;
            transition: var(--transition);
        }

        .search-wrapper:focus-within .search-icon {
            color: var(--highlight-text);
            transform: translateY(-50%) scale(1.1);
        }

        input[type="text"] {
            width: 100%;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
            font-size: 1.1rem;
            font-weight: 500;
            padding: 16px 24px 16px 60px;
            box-sizing: border-box;
            background: var(--container-bg-glass);
            backdrop-filter: blur(10px);
            color: var(--text-color);
            transition: var(--transition);
            box-shadow: var(--shadow-light);
        }

        #userinput, #autocomplete {
            background: var(--container-bg-glass);
            backdrop-filter: blur(10px);
        }

        #userinput:focus {
            border-color: var(--highlight-text);
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        #userinput::placeholder {
            color: var(--placeholder-color);
            font-weight: 400;
        }

        #autocomplete, #userinput {
            position: absolute;
            top: 0;
            left: 0;
        }

        #autocomplete {
            color: var(--placeholder-color);
            background: var(--container-bg-transparent);
            pointer-events: none;
            opacity: 0.6;
        }

        #suggestions {
            background: var(--container-bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-heavy);
            margin-top: 8px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px) scale(0.95);
            transition: var(--transition);
            overflow: hidden;
            max-height: 400px;
            overflow-y: auto;
        }

        #suggestions.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0) scale(1);
            animation: slideIn 0.3s ease-out;
        }

        #suggestions div {
            padding: 16px 24px;
            border-bottom: 1px solid var(--border-color);
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            font-weight: 500;
        }

        #suggestions div:hover {
            background: var(--highlight-bg);
            transform: translateX(4px);
        }

        #suggestions div.selected {
            background: var(--highlight-bg);
            border-left: 4px solid var(--highlight-text);
            padding-left: 20px;
        }

        #suggestions div:last-child {
            border-bottom: none;
        }

        #suggestions div::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 0;
            height: 100%;
            background: var(--primary-gradient);
            transition: width 0.3s ease;
            z-index: -1;
        }

        #suggestions div:hover::before {
            width: 4px;
        }

        #suggestions b, mark {
            color: var(--highlight-text);
            font-weight: 700;
        }

        #suggestions:empty:before {
            content: "üîç Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ n√†o";
            display: block;
            padding: 40px 24px;
            font-size: 1rem;
            color: var(--placeholder-color);
            text-align: center;
            font-style: italic;
        }

        /* Enhanced highlight styling */
        mark {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            padding: 2px 0;
            border-radius: 4px;
            font-weight: 700;
        }

        /* Loading animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--border-color);
            border-radius: 50%;
            border-top-color: var(--highlight-text);
            animation: spin 1s ease-in-out infinite;
            margin-left: 12px;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        .search-stats {
            padding: 12px 24px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border-color);
            background: var(--background-color);
            font-weight: 500;
        }

        /* Responsive Design */
        @media only screen and (max-width: 768px) {
            body {
                padding: 20px 16px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .header p {
                font-size: 1rem;
            }
            
            .search-wrapper {
                height: 52px;
            }
            
            input[type="text"] {
                font-size: 1rem;
                padding: 14px 20px 14px 56px;
            }
            
            .search-icon {
                left: 18px;
            }
            
            #suggestions div {
                padding: 14px 20px;
            }
            
            .theme-toggle {
                top: 16px;
                right: 16px;
                padding: 10px;
            }
        }

        @media only screen and (max-width: 480px) {
            body {
                padding: 16px 12px;
            }
            
            .header {
                margin-bottom: 32px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .search-wrapper {
                height: 48px;
            }
            
            input[type="text"] {
                font-size: 0.95rem;
                padding: 12px 16px 12px 52px;
                border-radius: var(--border-radius-small);
            }
            
            .search-icon {
                left: 16px;
            }
            
            #suggestions {
                border-radius: var(--border-radius-small);
                max-height: 300px;
            }
            
            #suggestions div {
                padding: 12px 16px;
                font-size: 0.95rem;
            }
        }

        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* High contrast mode */
        @media (prefers-contrast: high) {
            :root {
                --border-color: #000000;
                --text-color: #000000;
                --background-color: #ffffff;
            }
            
            [data-theme="dark"] {
                --border-color: #ffffff;
                --text-color: #ffffff;
                --background-color: #000000;
            }
        }

        /* Focus styles for accessibility */
        *:focus-visible {
            outline: 3px solid var(--highlight-text);
            outline-offset: 2px;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Tab Navigation Styles */
        .tab-navigation {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            background: var(--container-bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            padding: 8px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        .tab-btn {
            flex: 1;
            padding: 12px 20px;
            background: transparent;
            border: none;
            border-radius: var(--border-radius-small);
            color: var(--text-secondary);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            font-size: 0.95rem;
        }

        .tab-btn:hover {
            color: var(--text-color);
            background: var(--container-bg);
        }

        .tab-btn.active {
            background: var(--primary-gradient);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* Tab Content Styles */
        .tab-content-container {
            position: relative;
            min-height: 500px;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive Tab Navigation */
        @media (max-width: 768px) {
            .tab-navigation {
                margin: 15px;
                max-width: none;
            }

            .tab-btn {
                padding: 10px 16px;
                font-size: 0.9rem;
            }
        }

        /* Search History Styles */
        .history-container {
            max-width: 1000px;
            margin: 20px auto;
            padding: 0 20px;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--container-bg-glass);
            backdrop-filter: blur(20px);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-light);
        }

        .history-header h2 {
            margin: 0;
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--text-color);
        }

        .history-controls {
            display: flex;
            gap: 10px;
        }

        .clear-history-btn, .export-history-btn {
            padding: 10px 16px;
            border: none;
            border-radius: var(--border-radius-small);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .clear-history-btn {
            background: var(--secondary-gradient);
            color: white;
        }

        .export-history-btn {
            background: var(--primary-gradient);
            color: white;
        }

        .clear-history-btn:hover, .export-history-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .history-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-item {
            background: var(--container-bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow-light);
        }

        .stat-label {
            display: block;
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .stat-value {
            display: block;
            color: var(--text-color);
            font-size: 2rem;
            font-weight: 600;
            background: var(--primary-gradient);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .history-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .history-search-input, .history-filter-select, .history-sort-select {
            flex: 1;
            min-width: 200px;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-small);
            background: var(--container-bg);
            color: var(--text-color);
            font-size: 0.95rem;
            transition: var(--transition);
        }

        .history-search-input:focus, .history-filter-select:focus, .history-sort-select:focus {
            outline: none;
            border-color: var(--highlight-text);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .history-content-area {
            background: var(--container-bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            min-height: 400px;
        }

        .no-history {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .no-history-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .no-history h3 {
            margin: 0 0 10px 0;
            color: var(--text-color);
        }

        .history-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .history-item:hover {
            background: var(--highlight-bg);
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-item-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .history-query {
            font-weight: 600;
            color: var(--text-color);
            font-size: 1.1rem;
        }

        .history-details {
            display: flex;
            gap: 15px;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .history-time {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .history-results {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .history-actions {
            display: flex;
            gap: 8px;
        }

        .history-btn {
            padding: 8px 12px;
            border: none;
            border-radius: var(--border-radius-small);
            font-size: 0.8rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .search-again-btn {
            background: var(--primary-gradient);
            color: white;
        }

        .delete-history-btn {
            background: var(--secondary-gradient);
            color: white;
        }

        .history-btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-light);
        }

        .history-pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
            padding: 20px;
        }

        .page-btn {
            padding: 10px 16px;
            background: var(--primary-gradient);
            border: none;
            border-radius: var(--border-radius-small);
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .page-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .page-info {
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Responsive History */
        @media (max-width: 768px) {
            .history-container {
                padding: 0 15px;
            }

            .history-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .history-filters {
                flex-direction: column;
            }

            .history-search-input, .history-filter-select, .history-sort-select {
                min-width: 100%;
            }

            .history-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .history-actions {
                width: 100%;
                justify-content: flex-end;
            }

            .history-details {
                flex-wrap: wrap;
            }
        }

        /* Dashboard Styles */
        .dashboard-container {
            margin-top: 20px;
            padding: 0 20px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Adjust dashboard spacing when in tab */
        #dashboard-content .dashboard-container {
            margin-top: 0;
            padding-top: 20px;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--container-bg-glass);
            backdrop-filter: blur(20px);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-light);
        }

        .dashboard-header h2 {
            margin: 0;
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--text-color);
        }

        .refresh-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: var(--primary-gradient);
            border: none;
            border-radius: var(--border-radius-small);
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .refresh-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .dashboard-card {
            background: var(--container-bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            overflow: hidden;
            transition: var(--transition);
        }

        .dashboard-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-heavy);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: var(--highlight-bg);
            border-bottom: 1px solid var(--border-color);
        }

        .card-header h3 {
            margin: 0;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-color);
        }

        .status-indicator {
            font-size: 1.2rem;
        }

        .card-content {
            padding: 20px;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding: 8px 0;
        }

        .metric-label {
            color: var(--text-secondary);
            font-weight: 500;
        }

        .metric-value {
            color: var(--text-color);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .node-list {
            margin-top: 15px;
        }

        .node-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background: var(--container-bg);
            border-radius: var(--border-radius-small);
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .node-item.active {
            border-color: #10b981;
            background: linear-gradient(135deg, #10b98110, #34d39910);
        }

        .node-name {
            font-weight: 500;
            color: var(--text-color);
        }

        .node-load {
            font-weight: 600;
            color: #10b981;
        }

        .cache-performance {
            margin-top: 15px;
        }

        .performance-bar {
            width: 100%;
            height: 8px;
            background: var(--border-color);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        .performance-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #34d399);
            transition: width 0.5s ease;
        }

        .popular-queries {
            margin-top: 15px;
        }

        .popular-queries h4 {
            margin: 0 0 10px 0;
            font-size: 0.95rem;
            color: var(--text-color);
        }

        .query-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 0;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.9rem;
        }

        .query-item:last-child {
            border-bottom: none;
        }

        .query-count {
            background: var(--primary-gradient);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .performance-charts {
            margin-top: 15px;
        }

        .chart-container {
            background: var(--container-bg);
            border-radius: var(--border-radius-small);
            padding: 10px;
            border: 1px solid var(--border-color);
        }

        .logs-container {
            background: var(--container-bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            overflow: hidden;
        }

        .logs-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: var(--highlight-bg);
            border-bottom: 1px solid var(--border-color);
        }

        .logs-header h3 {
            margin: 0;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-color);
        }

        .clear-logs-btn {
            padding: 8px 16px;
            background: var(--secondary-gradient);
            border: none;
            border-radius: var(--border-radius-small);
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .clear-logs-btn:hover {
            transform: translateY(-1px);
        }

        .logs-content {
            max-height: 300px;
            overflow-y: auto;
            padding: 20px;
        }

        .log-entry {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px;
            margin: 5px 0;
            border-radius: var(--border-radius-small);
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
        }

        .log-entry.success {
            background: linear-gradient(135deg, #10b98110, #34d39910);
            border-left: 3px solid #10b981;
        }

        .log-entry.info {
            background: linear-gradient(135deg, #3b82f610, #6366f110);
            border-left: 3px solid #3b82f6;
        }

        .log-entry.warning {
            background: linear-gradient(135deg, #f59e0b10, #fbbf2410);
            border-left: 3px solid #f59e0b;
        }

        .log-entry.error {
            background: linear-gradient(135deg, #ef444410, #f8717110);
            border-left: 3px solid #ef4444;
        }

        .log-time {
            color: var(--text-secondary);
            font-weight: 500;
            min-width: 70px;
        }

        .log-type {
            color: var(--highlight-text);
            font-weight: 600;
            min-width: 120px;
        }

        .log-message {
            color: var(--text-color);
        }

        /* Responsive Dashboard */
        @media (max-width: 768px) {
            .dashboard-container {
                padding: 0 15px;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .dashboard-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .card-content {
                padding: 15px;
            }
        }

    </style>
</head>
<body>
<div class="main-container">
    <header class="header">
        <h1>FlexSearch</h1>
        <p>T√¨m ki·∫øm phim th√¥ng minh v·ªõi c√¥ng ngh·ªá AI</p>
    </header>
    
    <!-- Tab Navigation -->
    <div class="tab-navigation">
        <button class="tab-btn active" onclick="switchTab('search')" id="search-tab">
            üîç T√¨m Ki·∫øm
        </button>
        <button class="tab-btn" onclick="switchTab('history')" id="history-tab">
            üìö L·ªãch S·ª≠
        </button>
        <button class="tab-btn" onclick="switchTab('dashboard')" id="dashboard-tab">
            üìä Dashboard
        </button>
    </div>
    
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="Chuy·ªÉn ƒë·ªïi ch·∫ø ƒë·ªô s√°ng/t·ªëi">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
    </button>

    <!-- Tab Content Container -->
    <div class="tab-content-container">
        <!-- Search Tab Content -->
        <div class="tab-content active" id="search-content">
            <div class="search-container">
                <div class="search-wrapper">
                    <span class="search-icon" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                    </span>
                    <input type="text" id="autocomplete" readonly disabled tabindex="-1" aria-hidden="true">
                    <input type="text" id="userinput" placeholder="Nh·∫≠p t√™n phim" autocorrect="off" spellcheck="false" autocomplete="off" autofocus aria-label="T√¨m ki·∫øm phim" role="searchbox" aria-expanded="false" aria-autocomplete="list" aria-describedby="search-instructions">
                </div>
                <div id="suggestions" role="listbox" aria-label="G·ª£i √Ω t√¨m ki·∫øm"></div>
                <div id="search-instructions" class="sr-only">
                    S·ª≠ d·ª•ng c√°c ph√≠m m≈©i t√™n ƒë·ªÉ ƒëi·ªÅu h∆∞·ªõng trong danh s√°ch g·ª£i √Ω. Nh·∫•n Enter ho·∫∑c Tab ƒë·ªÉ ch·ªçn.
                </div>
            </div>
        </div>

        <!-- Search History Tab Content -->
        <div class="tab-content" id="history-content">
            <div class="history-container">
                <div class="history-header">
                    <h2>üìö L·ªãch S·ª≠ T√¨m Ki·∫øm</h2>
                    <div class="history-controls">
                        <button class="clear-history-btn" onclick="clearSearchHistory()">
                            üóëÔ∏è X√≥a T·∫•t C·∫£
                        </button>
                        <button class="export-history-btn" onclick="exportSearchHistory()">
                            üì• Xu·∫•t File
                        </button>
                    </div>
                </div>

                <div class="history-stats">
                    <div class="stat-item">
                        <span class="stat-label">T·ªïng s·ªë t√¨m ki·∫øm:</span>
                        <span class="stat-value" id="total-searches">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">T·ª´ kh√≥a duy nh·∫•t:</span>
                        <span class="stat-value" id="unique-queries">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">H√¥m nay:</span>
                        <span class="stat-value" id="today-searches">0</span>
                    </div>
                </div>

                <div class="history-filters">
                    <input type="text" id="history-search" placeholder="T√¨m ki·∫øm trong l·ªãch s·ª≠..." class="history-search-input">
                    <select id="history-filter" class="history-filter-select">
                        <option value="all">T·∫•t C·∫£</option>
                        <option value="today">H√¥m Nay</option>
                        <option value="week">Tu·∫ßn N√†y</option>
                        <option value="month">Th√°ng N√†y</option>
                    </select>
                    <select id="history-sort" class="history-sort-select">
                        <option value="newest">M·ªõi Nh·∫•t</option>
                        <option value="oldest">C≈© Nh·∫•t</option>
                        <option value="most-used">Nhi·ªÅu Nh·∫•t</option>
                        <option value="alphabetical">A-Z</option>
                    </select>
                </div>

                <div class="history-content-area" id="history-list">
                    <div class="no-history">
                        <div class="no-history-icon">üîç</div>
                        <h3>Ch∆∞a c√≥ l·ªãch s·ª≠ t√¨m ki·∫øm</h3>
                        <p>Th·ª±c hi·ªán t√¨m ki·∫øm ƒë·∫ßu ti√™n ƒë·ªÉ xem l·ªãch s·ª≠ t·∫°i ƒë√¢y</p>
                    </div>
                </div>

                <div class="history-pagination" id="history-pagination" style="display: none;">
                    <button class="page-btn" onclick="changePage(-1)">‚Üê Tr∆∞·ªõc</button>
                    <span class="page-info" id="page-info">Trang 1 / 1</span>
                    <button class="page-btn" onclick="changePage(1)">Sau ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Dashboard Tab Content -->
        <div class="tab-content" id="dashboard-content">
            <div class="dashboard-container">
                <div class="dashboard-header">
            <h2>üåê B·∫£ng ƒêi·ªÅu Khi·ªÉn H·ªá Th·ªëng Ph√¢n T√°n</h2>
            <button class="refresh-btn" onclick="refreshDashboard()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="23 4 23 10 17 10"></polyline>
                    <polyline points="1 20 1 14 7 14"></polyline>
                    <path d="m3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                </svg>
                L√†m M·ªõi
            </button>
        </div>

        <div class="dashboard-grid">
            <!-- Load Balancer Status -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h3>‚öñÔ∏è B·ªô C√¢n B·∫±ng T·∫£i</h3>
                    <span class="status-indicator" id="lb-status">üü¢</span>
                </div>
                <div class="card-content">
                    <div class="metric">
                        <span class="metric-label">M√°y Ch·ªß Ho·∫°t ƒê·ªông:</span>
                        <span class="metric-value" id="active-nodes">3</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">T·ªïng Y√™u C·∫ßu:</span>
                        <span class="metric-value" id="total-requests">1,247</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Chi·∫øn L∆∞·ª£c Hi·ªán T·∫°i:</span>
                        <span class="metric-value">V√≤ng Quay</span>
                    </div>
                    <div class="node-list" id="node-list">
                        <div class="node-item active">
                            <span class="node-name">M√°y-1 (Ch√≠nh)</span>
                            <span class="node-load">45%</span>
                        </div>
                        <div class="node-item active">
                            <span class="node-name">M√°y-2</span>
                            <span class="node-load">32%</span>
                        </div>
                        <div class="node-item active">
                            <span class="node-name">M√°y-3</span>
                            <span class="node-load">28%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Distributed Cache Status -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h3>üóÑÔ∏è B·ªô Nh·ªõ Cache Ph√¢n T√°n</h3>
                    <span class="status-indicator" id="cache-status">üü¢</span>
                </div>
                <div class="card-content">
                    <div class="metric">
                        <span class="metric-label">T·ª∑ L·ªá Cache Tr√∫ng:</span>
                        <span class="metric-value" id="cache-hit-ratio">87%</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">T·ªïng S·ªë Key:</span>
                        <span class="metric-value" id="total-keys">15,432</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">S·ª≠ D·ª•ng B·ªô Nh·ªõ:</span>
                        <span class="metric-value" id="memory-usage">2.3 GB</span>
                    </div>
                    <div class="cache-performance">
                        <div class="performance-bar">
                            <div class="performance-fill" style="width: 87%"></div>
                        </div>
                        <small>Hi·ªáu Su·∫•t Cache</small>
                    </div>
                </div>
            </div>

            <!-- Search Analytics -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h3>üìä Ph√¢n T√≠ch T√¨m Ki·∫øm</h3>
                    <span class="status-indicator">üìà</span>
                </div>
                <div class="card-content">
                    <div class="metric">
                        <span class="metric-label">T√¨m Ki·∫øm/Ph√∫t:</span>
                        <span class="metric-value" id="searches-per-min">42</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Th·ªùi Gian Ph·∫£n H·ªìi TB:</span>
                        <span class="metric-value" id="avg-response-time">125ms</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">T·ª∑ L·ªá Th√†nh C√¥ng:</span>
                        <span class="metric-value" id="success-rate">99.2%</span>
                    </div>
                    <div class="popular-queries">
                        <h4>üî• T·ª´ Kh√≥a Ph·ªï Bi·∫øn</h4>
                        <div class="query-item">
                            <span>avatar</span>
                            <span class="query-count">156</span>
                        </div>
                        <div class="query-item">
                            <span>inception</span>
                            <span class="query-count">89</span>
                        </div>
                        <div class="query-item">
                            <span>marvel</span>
                            <span class="query-count">67</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Performance -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h3>‚ö° Hi·ªáu Su·∫•t H·ªá Th·ªëng</h3>
                    <span class="status-indicator">‚ö°</span>
                </div>
                <div class="card-content">
                    <div class="metric">
                        <span class="metric-label">S·ª≠ D·ª•ng CPU:</span>
                        <span class="metric-value" id="cpu-usage">45%</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">S·ª≠ D·ª•ng RAM:</span>
                        <span class="metric-value" id="ram-usage">67%</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Disk I/O:</span>
                        <span class="metric-value" id="disk-io">23 MB/s</span>
                    </div>
                    <div class="performance-charts">
                        <div class="chart-container">
                            <canvas id="performance-chart" width="200" height="100"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Real-time Logs -->
        <div class="logs-container">
            <div class="logs-header">
                <h3>üìù Nh·∫≠t K√Ω H·ªá Th·ªëng Th·ªùi Gian Th·ª±c</h3>
                <button class="clear-logs-btn" onclick="clearLogs()">X√≥a</button>
            </div>
            <div class="logs-content" id="logs-content">
                <div class="log-entry success">
                    <span class="log-time">14:23:45</span>
                    <span class="log-type">[C√ÇN_B·∫∞NG_T·∫¢I]</span>
                    <span class="log-message">Y√™u c·∫ßu ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn M√°y-2 th√†nh c√¥ng</span>
                </div>
                <div class="log-entry info">
                    <span class="log-time">14:23:43</span>
                    <span class="log-type">[CACHE]</span>
                    <span class="log-message">Cache tr√∫ng cho t·ª´ kh√≥a: "avatar" - ph·∫£n h·ªìi 125ms</span>
                </div>
                <div class="log-entry warning">
                    <span class="log-time">14:23:40</span>
                    <span class="log-type">[KI·ªÇM_TRA_S·ª®C_KH·ªéE]</span>
                    <span class="log-message">M√°y-3 ph√°t hi·ªán s·ª≠ d·ª•ng b·ªô nh·ªõ cao: 85%</span>
                </div>
                <div class="log-entry success">
                    <span class="log-time">14:23:38</span>
                    <span class="log-type">[T√åM_KI·∫æM]</span>
                    <span class="log-message">Ho√†n th√†nh t√¨m ki·∫øm: "inception" - t√¨m th·∫•y 3 k·∫øt qu·∫£</span>
                </div>
            </div>
        </div>
        </div>
    </div>

</div>
<script type="module">

    // ===============================
    // === TAB MANAGEMENT SYSTEM ===
    // ===============================
    
    let currentTab = 'search';

    // Tab switching function
    window.switchTab = function(tabName) {
        // Remove active class from all tabs and content
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
        
        // Add active class to selected tab and content
        document.getElementById(tabName + '-tab').classList.add('active');
        document.getElementById(tabName + '-content').classList.add('active');
        
        currentTab = tabName;
        
        // If switching to dashboard, initialize or refresh it
        if (tabName === 'dashboard') {
            if (typeof initializeDashboard === 'function') {
                setTimeout(() => {
                    updateAllMetrics();
                    drawPerformanceChart();
                }, 100);
            }
        }
        
        // If switching to history, refresh history display
        if (tabName === 'history') {
            refreshHistoryDisplay();
        }
        
        // Save current tab to localStorage
        localStorage.setItem('activeTab', tabName);
    };

    // Initialize tabs on page load
    function initializeTabs() {
        const savedTab = localStorage.getItem('activeTab') || 'search';
        switchTab(savedTab);
    }

    // ===============================
    // === SEARCH HISTORY SYSTEM ===
    // ===============================
    
    let searchHistory = JSON.parse(localStorage.getItem('searchHistory')) || [];
    let currentPage = 1;
    const itemsPerPage = 10;

    // Add search to history
    function addToSearchHistory(query, resultsCount, responseTime) {
        const now = new Date();
        const existingIndex = searchHistory.findIndex(item => item.query.toLowerCase() === query.toLowerCase());
        
        if (existingIndex !== -1) {
            // Update existing entry
            searchHistory[existingIndex].count++;
            searchHistory[existingIndex].lastSearched = now.toISOString();
            searchHistory[existingIndex].resultsCount = resultsCount;
            searchHistory[existingIndex].responseTime = responseTime;
        } else {
            // Add new entry
            searchHistory.unshift({
                id: Date.now(),
                query: query,
                resultsCount: resultsCount,
                responseTime: responseTime,
                timestamp: now.toISOString(),
                lastSearched: now.toISOString(),
                count: 1
            });
        }
        
        // Keep only last 1000 searches
        if (searchHistory.length > 1000) {
            searchHistory = searchHistory.slice(0, 1000);
        }
        
        // Save to localStorage
        localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
        
        // Update history display if on history tab
        if (currentTab === 'history') {
            refreshHistoryDisplay();
        }
    }

    // Clear all search history
    window.clearSearchHistory = function() {
        if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√¨m ki·∫øm?')) {
            searchHistory = [];
            localStorage.removeItem('searchHistory');
            refreshHistoryDisplay();
        }
    };

    // Export search history
    window.exportSearchHistory = function() {
        if (searchHistory.length === 0) {
            alert('Kh√¥ng c√≥ l·ªãch s·ª≠ ƒë·ªÉ xu·∫•t!');
            return;
        }
        
        const csvContent = "data:text/csv;charset=utf-8," + 
            "T·ª´ kh√≥a,S·ªë k·∫øt qu·∫£,Th·ªùi gian ph·∫£n h·ªìi (ms),S·ªë l·∫ßn t√¨m,L·∫ßn cu·ªëi t√¨m\n" +
            searchHistory.map(item => {
                const lastSearched = new Date(item.lastSearched).toLocaleString('vi-VN');
                return `"${item.query}",${item.resultsCount},${item.responseTime},${item.count},"${lastSearched}"`;
            }).join("\n");
        
        const encodedUri = encodeURI(csvContent);
        const link = document.createElement("a");
        link.setAttribute("href", encodedUri);
        link.setAttribute("download", `lich-su-tim-kiem-${new Date().toISOString().split('T')[0]}.csv`);
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    };

    // Delete single history item
    window.deleteHistoryItem = function(id) {
        searchHistory = searchHistory.filter(item => item.id !== id);
        localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
        refreshHistoryDisplay();
    };

    // Search again from history
    window.searchAgain = function(query) {
        // Switch to search tab
        switchTab('search');
        
        // Set the query in search input
        const searchInput = document.getElementById('userinput');
        if (searchInput) {
            searchInput.value = query;
            searchInput.focus();
            
            // Trigger search
            setTimeout(() => {
                performSearch(query);
            }, 100);
        }
    };

    // Refresh history display
    function refreshHistoryDisplay() {
        updateHistoryStats();
        displayFilteredHistory();
    }

    // Update history statistics
    function updateHistoryStats() {
        const totalSearches = searchHistory.reduce((sum, item) => sum + item.count, 0);
        const uniqueQueries = searchHistory.length;
        const today = new Date().toDateString();
        const todaySearches = searchHistory.filter(item => 
            new Date(item.lastSearched).toDateString() === today
        ).reduce((sum, item) => sum + item.count, 0);
        
        document.getElementById('total-searches').textContent = totalSearches.toLocaleString();
        document.getElementById('unique-queries').textContent = uniqueQueries.toLocaleString();
        document.getElementById('today-searches').textContent = todaySearches.toLocaleString();
    }

    // Display filtered and sorted history
    function displayFilteredHistory() {
        const searchFilter = document.getElementById('history-search')?.value.toLowerCase() || '';
        const timeFilter = document.getElementById('history-filter')?.value || 'all';
        const sortBy = document.getElementById('history-sort')?.value || 'newest';
        
        let filteredHistory = [...searchHistory];
        
        // Apply search filter
        if (searchFilter) {
            filteredHistory = filteredHistory.filter(item => 
                item.query.toLowerCase().includes(searchFilter)
            );
        }
        
        // Apply time filter
        const now = new Date();
        switch (timeFilter) {
            case 'today':
                const today = now.toDateString();
                filteredHistory = filteredHistory.filter(item => 
                    new Date(item.lastSearched).toDateString() === today
                );
                break;
            case 'week':
                const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                filteredHistory = filteredHistory.filter(item => 
                    new Date(item.lastSearched) >= weekAgo
                );
                break;
            case 'month':
                const monthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);
                filteredHistory = filteredHistory.filter(item => 
                    new Date(item.lastSearched) >= monthAgo
                );
                break;
        }
        
        // Apply sorting
        switch (sortBy) {
            case 'newest':
                filteredHistory.sort((a, b) => new Date(b.lastSearched) - new Date(a.lastSearched));
                break;
            case 'oldest':
                filteredHistory.sort((a, b) => new Date(a.lastSearched) - new Date(b.lastSearched));
                break;
            case 'most-used':
                filteredHistory.sort((a, b) => b.count - a.count);
                break;
            case 'alphabetical':
                filteredHistory.sort((a, b) => a.query.localeCompare(b.query));
                break;
        }
        
        displayHistoryPage(filteredHistory);
    }

    // Display history page
    function displayHistoryPage(filteredHistory) {
        const historyList = document.getElementById('history-list');
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = startIndex + itemsPerPage;
        const pageItems = filteredHistory.slice(startIndex, endIndex);
        
        if (pageItems.length === 0) {
            historyList.innerHTML = `
                <div class="no-history">
                    <div class="no-history-icon">üîç</div>
                    <h3>Kh√¥ng t√¨m th·∫•y l·ªãch s·ª≠</h3>
                    <p>Kh√¥ng c√≥ k·∫øt qu·∫£ ph√π h·ª£p v·ªõi b·ªô l·ªçc hi·ªán t·∫°i</p>
                </div>
            `;
            document.getElementById('history-pagination').style.display = 'none';
            return;
        }
        
        historyList.innerHTML = pageItems.map(item => {
            const lastSearched = new Date(item.lastSearched);
            const timeAgo = getTimeAgo(lastSearched);
            
            return `
                <div class="history-item">
                    <div class="history-item-content">
                        <div class="history-query">${escapeHtml(item.query)}</div>
                        <div class="history-details">
                            <span class="history-time">
                                üïí ${timeAgo}
                            </span>
                            <span class="history-results">
                                üìä ${item.resultsCount} k·∫øt qu·∫£
                            </span>
                            <span class="history-response">
                                ‚ö° ${item.responseTime}ms
                            </span>
                            <span class="history-count">
                                üîÑ ${item.count} l·∫ßn
                            </span>
                        </div>
                    </div>
                    <div class="history-actions">
                        <button class="history-btn search-again-btn" onclick="searchAgain('${escapeHtml(item.query)}')">
                            üîç T√¨m L·∫°i
                        </button>
                        <button class="history-btn delete-history-btn" onclick="deleteHistoryItem(${item.id})">
                            üóëÔ∏è X√≥a
                        </button>
                    </div>
                </div>
            `;
        }).join('');
        
        // Update pagination
        updatePagination(filteredHistory.length);
    }

    // Update pagination
    function updatePagination(totalItems) {
        const totalPages = Math.ceil(totalItems / itemsPerPage);
        const pagination = document.getElementById('history-pagination');
        const pageInfo = document.getElementById('page-info');
        
        if (totalPages <= 1) {
            pagination.style.display = 'none';
            return;
        }
        
        pagination.style.display = 'flex';
        pageInfo.textContent = `Trang ${currentPage} / ${totalPages}`;
        
        // Update button states
        const prevBtn = pagination.querySelector('.page-btn:first-child');
        const nextBtn = pagination.querySelector('.page-btn:last-child');
        
        prevBtn.disabled = currentPage === 1;
        nextBtn.disabled = currentPage === totalPages;
    }

    // Change page
    window.changePage = function(direction) {
        const searchFilter = document.getElementById('history-search')?.value.toLowerCase() || '';
        const timeFilter = document.getElementById('history-filter')?.value || 'all';
        
        let filteredHistory = [...searchHistory];
        
        if (searchFilter) {
            filteredHistory = filteredHistory.filter(item => 
                item.query.toLowerCase().includes(searchFilter)
            );
        }
        
        // Apply time filter (same logic as displayFilteredHistory)
        const now = new Date();
        switch (timeFilter) {
            case 'today':
                const today = now.toDateString();
                filteredHistory = filteredHistory.filter(item => 
                    new Date(item.lastSearched).toDateString() === today
                );
                break;
            case 'week':
                const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                filteredHistory = filteredHistory.filter(item => 
                    new Date(item.lastSearched) >= weekAgo
                );
                break;
            case 'month':
                const monthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);
                filteredHistory = filteredHistory.filter(item => 
                    new Date(item.lastSearched) >= monthAgo
                );
                break;
        }
        
        const totalPages = Math.ceil(filteredHistory.length / itemsPerPage);
        const newPage = currentPage + direction;
        
        if (newPage >= 1 && newPage <= totalPages) {
            currentPage = newPage;
            displayFilteredHistory();
        }
    };

    // Utility functions
    function getTimeAgo(date) {
        const now = new Date();
        const diffMs = now - date;
        const diffMins = Math.floor(diffMs / 60000);
        const diffHours = Math.floor(diffMs / 3600000);
        const diffDays = Math.floor(diffMs / 86400000);
        
        if (diffMins < 1) return 'V·ª´a xong';
        if (diffMins < 60) return `${diffMins} ph√∫t tr∆∞·ªõc`;
        if (diffHours < 24) return `${diffHours} gi·ªù tr∆∞·ªõc`;
        if (diffDays < 7) return `${diffDays} ng√†y tr∆∞·ªõc`;
        
        return date.toLocaleDateString('vi-VN');
    }

    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }

    // Add event listeners for history filters
    document.addEventListener('DOMContentLoaded', () => {
        const historySearch = document.getElementById('history-search');
        const historyFilter = document.getElementById('history-filter');
        const historySort = document.getElementById('history-sort');
        
        if (historySearch) {
            historySearch.addEventListener('input', () => {
                currentPage = 1;
                displayFilteredHistory();
            });
        }
        
        if (historyFilter) {
            historyFilter.addEventListener('change', () => {
                currentPage = 1;
                displayFilteredHistory();
            });
        }
        
        if (historySort) {
            historySort.addEventListener('change', () => {
                currentPage = 1;
                displayFilteredHistory();
            });
        }
    });

    // Enhanced Features:
    // 1. Instant Search with debouncing
    // 2. Auto-Complete with smart matching
    // 3. Contextual Suggestions
    // 4. Query Cache for performance
    // 5. Result Highlighting with gradients
    // 6. Advanced Tokenizer
    // 7. Encoder optimization
    // 8. Multi-field Document Index
    // 9. Intuitive Keyboard Navigation
    // 10. Dark mode support
    // 11. Accessibility improvements
    // 12. Loading states and animations

    const suggestions = document.getElementById("suggestions");
    const autocomplete = document.getElementById("autocomplete");
    const userinput = document.getElementById("userinput");
    let results = [];
    let iterate = -1;
    let debounceTimer;
    let isAcceptingSuggestion = false;
    let searchCache = new Map();
    let isLoading = false;

    // Theme Management
    function initTheme() {
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
    }

    window.toggleTheme = function() {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
    };

    // Initialize theme on load
    initTheme();
    
    // Initialize tabs on load
    initializeTabs();

    // Enhanced input handling with better debouncing
    userinput.addEventListener("input", handleInput, true);
    userinput.addEventListener("keydown", key_handler, true);
    userinput.addEventListener("focus", handleFocus, true);
    userinput.addEventListener("blur", handleBlur, true);
    suggestions.addEventListener("click", accept_suggestion, true);

    // Hide suggestions when clicking outside
    document.addEventListener("click", (event) => {
        if (!event.target.closest('.search-container')) {
            hide_suggestions();
        }
    });

    function handleInput() {
        if (isAcceptingSuggestion) {
            isAcceptingSuggestion = false;
            return;
        }

        clearTimeout(debounceTimer);
        
        const query = userinput.value.trim();
        if (!query) {
            hide_suggestions();
            return;
        }

        // Show loading state
        setLoadingState(true);

        debounceTimer = setTimeout(() => {
            show_results();
        }, 200);
    }

    function handleFocus() {
        userinput.setAttribute('aria-expanded', 'true');
        if (userinput.value.trim() && results.length > 0) {
            suggestions.classList.add("visible");
        }
    }

    function handleBlur() {
        // Delay to allow click on suggestions
        setTimeout(() => {
            userinput.setAttribute('aria-expanded', 'false');
        }, 150);
    }

    function setLoadingState(loading) {
        isLoading = loading;
        if (loading) {
            if (!suggestions.querySelector('.loading-indicator')) {
                const loadingDiv = document.createElement('div');
                loadingDiv.className = 'loading-indicator';
                loadingDiv.innerHTML = '<div class="loading"></div><span>ƒêang t√¨m ki·∫øm...</span>';
                loadingDiv.style.cssText = 'padding: 20px 24px; text-align: center; color: var(--text-secondary); display: flex; align-items: center; justify-content: center; gap: 12px;';
                suggestions.innerHTML = '';
                suggestions.appendChild(loadingDiv);
                suggestions.classList.add("visible");
            }
        }
    }

    async function show_results() {
        const query = userinput.value.trim();
        const startTime = Date.now();
        
        if (!query) {
            results = [];
            suggestions.innerHTML = "";
            suggestions.classList.remove("visible");
            update_autocomplete();
            setLoadingState(false);
            return;
        }

        // Check cache first
        if (searchCache.has(query)) {
            results = searchCache.get(query);
            displayResults();
            
            // Add to history even for cached results
            const responseTime = Date.now() - startTime;
            addToSearchHistory(query, results.length, responseTime);
            return;
        }

        try {
            const response = await fetch(`/api/search?q=${encodeURIComponent(query)}`);
            if (!response.ok) throw new Error('Search failed');
            
            results = await response.json();
            const responseTime = Date.now() - startTime;
            
            // Add to search history
            addToSearchHistory(query, results.length, responseTime);
            
            // Cache results
            searchCache.set(query, results);
            
            // Limit cache size
            if (searchCache.size > 50) {
                const firstKey = searchCache.keys().next().value;
                searchCache.delete(firstKey);
            }
            
            displayResults();
        } catch (error) {
            console.error("L·ªói khi t√¨m ki·∫øm:", error);
            results = [];
            displayErrorState();
        } finally {
            setLoadingState(false);
        }
    }

    // Global search function for external calls
    window.performSearch = async function(query) {
        if (query) {
            userinput.value = query;
            await show_results();
        }
    };

    function displayResults() {
        setLoadingState(false);
        
        if (results.length > 0) {
            suggestions.classList.add("visible");
        } else {
            suggestions.classList.remove("visible");
        }

        const fragment = document.createDocumentFragment();
        
        // Add search stats
        if (results.length > 0) {
            const statsDiv = document.createElement("div");
            statsDiv.className = 'search-stats';
            statsDiv.textContent = `T√¨m th·∫•y ${results.length} k·∫øt qu·∫£`;
            fragment.appendChild(statsDiv);
        }

        // Add results
        results.forEach((resultItem, index) => {
            const entry = document.createElement("div");
            entry.setAttribute('role', 'option');
            entry.setAttribute('aria-selected', 'false');
            entry.innerHTML = resultItem.highlight || resultItem.doc.title;
            entry.addEventListener('mouseenter', () => select_result(index + 1)); // +1 because of stats div
            fragment.appendChild(entry);
        });

        suggestions.innerHTML = "";
        suggestions.appendChild(fragment);

        iterate = -1;
        if (results.length > 0) {
            select_result(1); // Select first result (index 1 because of stats div)
        }
        update_autocomplete();
    }

    function displayErrorState() {
        suggestions.innerHTML = `
            <div style="padding: 40px 24px; text-align: center; color: var(--text-secondary);">
                <div style="font-size: 2rem; margin-bottom: 12px;">‚ö†Ô∏è</div>
                <div>C√≥ l·ªói x·∫£y ra khi t√¨m ki·∫øm</div>
                <div style="font-size: 0.9rem; margin-top: 8px; opacity: 0.7;">Vui l√≤ng th·ª≠ l·∫°i sau</div>
            </div>
        `;
        suggestions.classList.add("visible");
    }

    function key_handler(event) {
        const key = event.key;
        const suggestionItems = suggestions.children;
        const totalItems = suggestionItems.length;
        
        if (key === "ArrowUp" || key === "ArrowDown") {
            if (totalItems === 0) return;
            
            if (key === "ArrowUp") {
                if (iterate > 0) {
                    select_result(iterate - 1);
                } else {
                    select_result(totalItems - 1); // Wrap to last item
                }
            } else { // ArrowDown
                if (iterate < totalItems - 1) {
                    select_result(iterate + 1);
                } else {
                    select_result(0); // Wrap to first item
                }
            }
            update_autocomplete();
            event.preventDefault();
        } else if (key === "Enter") {
            if (iterate >= 0 && iterate < totalItems) {
                const selectedItem = suggestionItems[iterate];
                if (selectedItem && !selectedItem.classList.contains('search-stats')) {
                    accept_selected_suggestion();
                    event.preventDefault();
                }
            }
        } else if (key === "Tab" || key === "ArrowRight") {
            if (autocomplete.value && autocomplete.value !== userinput.value) {
                accept_autocomplete();
                event.preventDefault();
            }
        } else if (key === "Escape") {
            hide_suggestions();
            event.preventDefault();
        }
    }

    function update_autocomplete() {
        const value = userinput.value;
        const statsOffset = suggestions.querySelector('.search-stats') ? 1 : 0;
        const adjustedIndex = iterate - statsOffset;
        
        if (adjustedIndex >= 0 && adjustedIndex < results.length) {
            const currentResult = results[adjustedIndex];
            const currentResultText = currentResult && currentResult.doc && currentResult.doc.title;
            const match = currentResultText && currentResultText.toLowerCase().startsWith(value.toLowerCase());

            if (match && value.length > 0) {
                autocomplete.value = value + currentResultText.substring(value.length);
            } else {
                autocomplete.value = "";
            }
        } else {
            autocomplete.value = "";
        }
    }

    function hide_suggestions() {
        suggestions.classList.remove("visible");
        autocomplete.value = "";
        iterate = -1;
        userinput.setAttribute('aria-expanded', 'false');
        
        // Clear all selections
        const suggestionItems = suggestions.children;
        for (const item of suggestionItems) {
            item.classList.remove("selected");
            item.setAttribute('aria-selected', 'false');
        }
    }

    function select_result(index) {
        const suggestionItems = suggestions.children;
        
        // Clear previous selections
        for (const item of suggestionItems) {
            item.classList.remove("selected");
            item.setAttribute('aria-selected', 'false');
        }

        iterate = index;

        if (iterate >= 0 && iterate < suggestionItems.length) {
            const selectedItem = suggestionItems[iterate];
            selectedItem.classList.add("selected");
            selectedItem.setAttribute('aria-selected', 'true');
            
            // Scroll into view if needed
            selectedItem.scrollIntoView({
                block: 'nearest',
                behavior: 'smooth'
            });
        }
    }

    function accept_autocomplete() {
        isAcceptingSuggestion = true;
        userinput.value = autocomplete.value;
        hide_suggestions();
        results = [];
        userinput.focus();
        
        // Add subtle feedback
        userinput.style.transform = 'scale(1.02)';
        setTimeout(() => {
            userinput.style.transform = '';
        }, 150);
    }

    function accept_selected_suggestion() {
        const suggestionItems = suggestions.children;
        const statsOffset = suggestions.querySelector('.search-stats') ? 1 : 0;
        const adjustedIndex = iterate - statsOffset;
        
        if (adjustedIndex >= 0 && adjustedIndex < results.length) {
            const selectedResult = results[adjustedIndex];
            isAcceptingSuggestion = true;
            userinput.value = selectedResult.doc.title;
            hide_suggestions();
            
            // Add feedback animation
            userinput.style.transform = 'scale(1.02)';
            setTimeout(() => {
                userinput.style.transform = '';
            }, 150);
        }
    }

    function accept_suggestion(event) {
        event.stopPropagation();

        const target = event.target.closest('div');
        if (!target || target.classList.contains('search-stats') || target.classList.contains('loading-indicator')) {
            return;
        }

        isAcceptingSuggestion = true;
        
        // Extract plain text from HTML content
        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = target.innerHTML;
        userinput.value = tempDiv.textContent || tempDiv.innerText || '';

        hide_suggestions();

        // Add click feedback
        target.style.transform = 'scale(0.98)';
        setTimeout(() => {
            target.style.transform = '';
        }, 100);

        return false;
    }

    // Performance optimization: Preconnect to API
    const link = document.createElement('link');
    link.rel = 'preconnect';
    link.href = window.location.origin;
    document.head.appendChild(link);

    // Add keyboard shortcuts info
    const shortcutsInfo = document.createElement('div');
    shortcutsInfo.className = 'sr-only';
    shortcutsInfo.setAttribute('aria-live', 'polite');
    document.body.appendChild(shortcutsInfo);

    // Focus management
    userinput.addEventListener('keydown', (e) => {
        if (e.key === '/') {
            e.preventDefault();
            userinput.focus();
        }
    });

    // Add focus ring for keyboard navigation
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Tab') {
            document.body.classList.add('keyboard-navigation');
        }
    });

    document.addEventListener('mousedown', () => {
        document.body.classList.remove('keyboard-navigation');
    });

    // ===================================
    // === DISTRIBUTED SYSTEM DASHBOARD ===
    // ===================================

    // Dashboard variables
    let dashboardMetrics = {
        activeNodes: 3,
        totalRequests: 1247,
        cacheHitRatio: 87,
        totalKeys: 15432,
        memoryUsage: 2.3,
        searchesPerMin: 42,
        avgResponseTime: 125,
        successRate: 99.2,
        cpuUsage: 45,
        ramUsage: 67,
        diskIO: 23
    };

    let performanceData = [];
    let logEntries = [];

    // Global dashboard functions
    window.refreshDashboard = function() {
        console.log("üîÑ ƒêang l√†m m·ªõi b·∫£ng ƒëi·ªÅu khi·ªÉn...");
        simulateRealTimeUpdates();
        updateAllMetrics();
        addLogEntry('info', 'B·∫¢NG_ƒêI·ªÄU_KHI·ªÇN', 'ƒê√£ l√†m m·ªõi b·∫£ng ƒëi·ªÅu khi·ªÉn th·ªß c√¥ng');
    };

    window.clearLogs = function() {
        logEntries = [];
        const logsContent = document.getElementById('logs-content');
        logsContent.innerHTML = '';
        addLogEntry('info', 'H·ªÜ_TH·ªêNG', 'ƒê√£ x√≥a nh·∫≠t k√Ω');
    };

    // Simulate real-time data updates
    function simulateRealTimeUpdates() {
        // Simulate metric changes
        dashboardMetrics.totalRequests += Math.floor(Math.random() * 10) + 1;
        dashboardMetrics.cacheHitRatio = Math.max(75, Math.min(95, dashboardMetrics.cacheHitRatio + (Math.random() - 0.5) * 5));
        dashboardMetrics.searchesPerMin = Math.max(20, Math.min(80, dashboardMetrics.searchesPerMin + (Math.random() - 0.5) * 10));
        dashboardMetrics.avgResponseTime = Math.max(80, Math.min(200, dashboardMetrics.avgResponseTime + (Math.random() - 0.5) * 20));
        dashboardMetrics.cpuUsage = Math.max(20, Math.min(80, dashboardMetrics.cpuUsage + (Math.random() - 0.5) * 10));
        dashboardMetrics.ramUsage = Math.max(40, Math.min(90, dashboardMetrics.ramUsage + (Math.random() - 0.5) * 8));
        dashboardMetrics.diskIO = Math.max(5, Math.min(50, dashboardMetrics.diskIO + (Math.random() - 0.5) * 5));

        // Add performance data point
        performanceData.push({
            timestamp: Date.now(),
            cpu: dashboardMetrics.cpuUsage,
            ram: dashboardMetrics.ramUsage
        });

        // Keep only last 20 data points
        if (performanceData.length > 20) {
            performanceData.shift();
        }
    }

    // Update all dashboard metrics
    function updateAllMetrics() {
        // Update Load Balancer metrics
        document.getElementById('active-nodes').textContent = dashboardMetrics.activeNodes;
        document.getElementById('total-requests').textContent = dashboardMetrics.totalRequests.toLocaleString();

        // Update Cache metrics
        document.getElementById('cache-hit-ratio').textContent = Math.round(dashboardMetrics.cacheHitRatio) + '%';
        document.getElementById('total-keys').textContent = dashboardMetrics.totalKeys.toLocaleString();
        document.getElementById('memory-usage').textContent = dashboardMetrics.memoryUsage.toFixed(1) + ' GB';

        // Update cache performance bar
        const performanceFill = document.querySelector('.performance-fill');
        if (performanceFill) {
            performanceFill.style.width = Math.round(dashboardMetrics.cacheHitRatio) + '%';
        }

        // Update Search Analytics
        document.getElementById('searches-per-min').textContent = Math.round(dashboardMetrics.searchesPerMin);
        document.getElementById('avg-response-time').textContent = Math.round(dashboardMetrics.avgResponseTime) + 'ms';
        document.getElementById('success-rate').textContent = dashboardMetrics.successRate.toFixed(1) + '%';

        // Update System Performance
        document.getElementById('cpu-usage').textContent = Math.round(dashboardMetrics.cpuUsage) + '%';
        document.getElementById('ram-usage').textContent = Math.round(dashboardMetrics.ramUsage) + '%';
        document.getElementById('disk-io').textContent = Math.round(dashboardMetrics.diskIO) + ' MB/s';

        // Update node loads (simulate)
        const nodeItems = document.querySelectorAll('.node-item');
        nodeItems.forEach((item, index) => {
            const loadSpan = item.querySelector('.node-load');
            if (loadSpan) {
                const baseLoad = [45, 32, 28][index] || 30;
                const newLoad = Math.max(15, Math.min(85, baseLoad + (Math.random() - 0.5) * 10));
                loadSpan.textContent = Math.round(newLoad) + '%';
                
                // Update color based on load
                if (newLoad > 70) {
                    loadSpan.style.color = '#ef4444';
                } else if (newLoad > 50) {
                    loadSpan.style.color = '#f59e0b';
                } else {
                    loadSpan.style.color = '#10b981';
                }
            }
        });

        // Update status indicators
        updateStatusIndicators();
    }

    // Update status indicators based on metrics
    function updateStatusIndicators() {
        const lbStatus = document.getElementById('lb-status');
        const cacheStatus = document.getElementById('cache-status');

        // Load balancer status
        if (dashboardMetrics.activeNodes >= 3) {
            lbStatus.textContent = 'üü¢';
        } else if (dashboardMetrics.activeNodes >= 2) {
            lbStatus.textContent = 'üü°';
        } else {
            lbStatus.textContent = 'üî¥';
        }

        // Cache status
        if (dashboardMetrics.cacheHitRatio >= 80) {
            cacheStatus.textContent = 'üü¢';
        } else if (dashboardMetrics.cacheHitRatio >= 60) {
            cacheStatus.textContent = 'üü°';
        } else {
            cacheStatus.textContent = 'üî¥';
        }
    }

    // Add log entry
    function addLogEntry(type, category, message) {
        const timestamp = new Date().toLocaleTimeString('vi-VN', { hour12: false });
        const logEntry = {
            timestamp,
            type,
            category,
            message
        };

        logEntries.unshift(logEntry);

        // Keep only last 50 log entries
        if (logEntries.length > 50) {
            logEntries.pop();
        }

        updateLogsDisplay();
    }

    // Update logs display
    function updateLogsDisplay() {
        const logsContent = document.getElementById('logs-content');
        logsContent.innerHTML = '';

        logEntries.slice(0, 10).forEach(entry => {
            const logElement = document.createElement('div');
            logElement.className = `log-entry ${entry.type}`;
            logElement.innerHTML = `
                <span class="log-time">${entry.timestamp}</span>
                <span class="log-type">[${entry.category}]</span>
                <span class="log-message">${entry.message}</span>
            `;
            logsContent.appendChild(logElement);
        });
    }

    // Draw performance chart
    function drawPerformanceChart() {
        const canvas = document.getElementById('performance-chart');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;

        // Clear canvas
        ctx.clearRect(0, 0, width, height);

        if (performanceData.length < 2) return;

        // Set up chart
        ctx.strokeStyle = '#667eea';
        ctx.lineWidth = 2;
        ctx.fillStyle = 'rgba(102, 126, 234, 0.1)';

        // Draw CPU usage line
        ctx.beginPath();
        performanceData.forEach((point, index) => {
            const x = (index / (performanceData.length - 1)) * width;
            const y = height - (point.cpu / 100) * height;
            
            if (index === 0) {
                ctx.moveTo(x, y);
            } else {
                ctx.lineTo(x, y);
            }
        });
        ctx.stroke();

        // Draw RAM usage line
        ctx.strokeStyle = '#f093fb';
        ctx.beginPath();
        performanceData.forEach((point, index) => {
            const x = (index / (performanceData.length - 1)) * width;
            const y = height - (point.ram / 100) * height;
            
            if (index === 0) {
                ctx.moveTo(x, y);
            } else {
                ctx.lineTo(x, y);
            }
        });
        ctx.stroke();
    }

    // Simulate search events
    function simulateSearchEvent() {
        const queries = ['avatar', 'inception', 'marvel', 'chi·∫øn tranh sao', 'ma tr·∫≠n', 'ch√∫a t·ªÉ nh·ªØng chi·∫øc nh·∫´n'];
        const randomQuery = queries[Math.floor(Math.random() * queries.length)];
        const responseTime = Math.floor(Math.random() * 100) + 80;
        const resultsCount = Math.floor(Math.random() * 20) + 1;

        // Add log entry
        addLogEntry('success', 'T√åM_KI·∫æM', `Ho√†n th√†nh t√¨m ki·∫øm: "${randomQuery}" - t√¨m th·∫•y ${resultsCount} k·∫øt qu·∫£ trong ${responseTime}ms`);

        // Simulate cache events
        if (Math.random() > 0.3) {
            setTimeout(() => {
                addLogEntry('info', 'CACHE', `Cache tr√∫ng cho t·ª´ kh√≥a: "${randomQuery}" - ph·∫£n h·ªìi ${responseTime}ms`);
            }, 500);
        }

        // Simulate load balancer events
        const nodes = ['M√°y-1', 'M√°y-2', 'M√°y-3'];
        const randomNode = nodes[Math.floor(Math.random() * nodes.length)];
        setTimeout(() => {
            addLogEntry('success', 'C√ÇN_B·∫∞NG_T·∫¢I', `Y√™u c·∫ßu ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn ${randomNode} th√†nh c√¥ng`);
        }, 200);
    }

    // Simulate health check events
    function simulateHealthCheck() {
        const issues = [
            'M√°y-3 ph√°t hi·ªán s·ª≠ d·ª•ng b·ªô nh·ªõ cao: 85%',
            'Ho√†n th√†nh l√†m m·ªõi cache th√†nh c√¥ng',
            'T·∫•t c·∫£ m√°y ch·ªß ƒëang ph·∫£n h·ªìi b√¨nh th∆∞·ªùng',
            'K√≠ch ho·∫°t t·ª± ƒë·ªông m·ªü r·ªông: Th√™m m√°y ch·ªß m·ªõi',
            'Ho√†n th√†nh ki·ªÉm tra chuy·ªÉn ƒë·ªïi d·ª± ph√≤ng th√†nh c√¥ng'
        ];

        const randomIssue = issues[Math.floor(Math.random() * issues.length)];
        const type = randomIssue.includes('cao') || randomIssue.includes('ph√°t hi·ªán') ? 'warning' : 'info';
        
        addLogEntry(type, 'KI·ªÇM_TRA_S·ª®C_KH·ªéE', randomIssue);
    }

    // Initialize dashboard
    function initializeDashboard() {
        updateAllMetrics();
        
        // Add initial log entries
        addLogEntry('success', 'H·ªÜ_TH·ªêNG', 'H·ªá th·ªëng ph√¢n t√°n kh·ªüi ƒë·ªông th√†nh c√¥ng');
        addLogEntry('info', 'C√ÇN_B·∫∞NG_T·∫¢I', 'B·ªô c√¢n b·∫±ng t·∫£i ƒë√£ kh·ªüi t·∫°o v·ªõi 3 m√°y ch·ªß');
        addLogEntry('info', 'CACHE', 'Redis cluster ƒë√£ k·∫øt n·ªëi v√† s·∫µn s√†ng');
        
        // Start real-time updates
        setInterval(() => {
            simulateRealTimeUpdates();
            updateAllMetrics();
            drawPerformanceChart();
        }, 3000);

        // Simulate search events
        setInterval(simulateSearchEvent, 5000);

        // Simulate health checks
        setInterval(simulateHealthCheck, 15000);

        // Initial chart draw
        setTimeout(drawPerformanceChart, 1000);
    }

    // Start dashboard when page loads
    document.addEventListener('DOMContentLoaded', () => {
        setTimeout(initializeDashboard, 2000);
    });

</script>
</body>
</html>